<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content=""/>
    <meta name="author" content=""/>

    <title>Coole WEM Applikation</title>

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom styles for this template -->
    <link href="/css/dashboard.css" rel="stylesheet"/>


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    
    <style>
	    .media{
		    border-bottom: 1px solid #eee;
		    margin-bottom: 10px;
		    padding-bottom: 12px;
	    }
	    .smallertext{
		    font-size: smaller;
	    }
	    .approvedState{
		    font-weight: bold;
		    color:#65bb4c;
	    }
	    .commentfooter{
		    padding-top: 4px;
	    }
	    
    </style>
  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Coole WEM Application</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#">Kommentare</a></li>
            <li><a href="#">Blogs</a></li>
          </ul>
          <form class="navbar-form navbar-right">
            <input type="text" class="form-control" placeholder="Produkt finden" id="filter" name="filter" />
            <button type="submit" class="btn btn-default">Suchen</button>
          </form>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
	      <div class="row">
	        <div class="col-sm-3 col-md-2 sidebar">
	        
	        	<div>
			  		Hello: <span th:text="${userDisplayName}">27</span>
				</div>
	
				<div id="signinContainer">        
		        </div>
	        
	        
			
				<!--  // sidebar navi -->
				<ul class="nav nav-sidebar">
		            <li><a  href="?filter=audio">Audio</a></li>
		            <li><a href="?filter=dvd player">DVD Player</a></li>
		            <li><a href="?filter=plasma">Plasma TV</a></li>
		            <li><a href="?filter=camera">Kamera</a></li>
		            <li><a href="?filter=philips">Philips Products</a></li>
		          </ul>
			
			
	        </div><!-- ."col-sm-3 col-md-2 sidebar" -->
	        
	        
	        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
	          
	          	<div class="row">
	  			
	  				<div style=" padding-bottom: 20px;margin: 40px 0 20px;border-bottom: 1px solid #eee;">
	  				
			  			<div class="btn-group" role="group" aria-label="...">
						  <a class="btn btn-default" href="?filter=audio">Audio</a>
						  <a class="btn btn-default" href="?filter=dvd%20player">DVD Player</a>
						  <a class="btn btn-default" href="?filter=plasma">Plasma TV</a>
						  <a class="btn btn-default" href="?filter=camera">Kamera</a>
						  <a class="btn btn-default" href="?filter=philips">Philips Products</a>
						</div>
					
	  				</div>
	  			
	  			
	  			
		  			<!-- // Product Template -->
		  			<div class="row">
				  		
				  		<div class="col-md-9" th:each="prod : ${products}">
						  	<div class="media">
						  		<div class="media-left">
						  			<a href="#"><img class="media-object" data-src="holder.js/64x64" th:src="${prod.id }" data-holder-rendered="true" width="128"/></a>
		      					</div>
			  					<div class="media-body">
			  						<h4 class="media-heading" th:text="${prod.id}">title</h4>
			  							<div th:text="${prod.id}">
			  								Text
			  							</div>
			  							
		          						<p>kommentare</p>
		      					</div>
		    				</div>
				  		</div><!-- /col-md-8 -->
				  		
			  		</div><!-- /row -->  			  			
	      		</div>
	    	</div>
	    </div>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    
    <script type="text/javascript">
    <![CDATA[
		
    	$(document).ready(function(){
			// Embed the frame pointing to the protected page,
			// this way the login form will be displayed in this frame.
			var url = "${pageContext.request.contextPath}/welcome.app";
			var iframe = "<iframe id='ifr_cont_relay' type='text/html' style='overflow-x: hidden; overflow-y: hidden;' border='0' frameborder='0' width='350px' height='240px' src='" + url + "'></iframe>";
			
			$('#signinContainer').append(iframe);
			
			

									
    	});
    	
    	    	
    	var btns = $("button[class*=addcomment]");
    	for(var i=0; i < btns.length; i++){
    		var btn = btns[i];
    		$(btn).click(function(){
    			var frm = $(this).closest('form');
    			var relid = frm.find('input[name="relid"]').val();
    			
    			$.ajax({
                    type: frm.attr('method'),
                    url: frm.attr('action'),
                    data: frm.serialize(),
                    success: function (data) {
                        //alert('ok');
                    	
                    	var markup = '<li>';
                    	markup += '<p>';
                    	markup += '<a data-toggle="collapse" href="#comment'+data.id+'" aria-expanded="false" aria-controls="comment'+data.id+'">'+data.title+' ['+data.createdby+']</a>';
                    	markup += '</p>';
                    	markup += '<div class="collapse" id="comment'+data.id+'">';
                    	markup += '<div class="well">';
                    	markup += data.content;
                    	markup += '</div>';
                    	markup += '</div>';
                    	markup += '</li>';
                    	$('#ul' + relid).append(markup);

                    },
                    error:function(){
                    	alert('target not found');
                    }
                });
    			
    		});
    	}
	    	
    	]]>

    	
    </script>
  </body>
</html>
